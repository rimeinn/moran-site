# 拼寫運算

魔然的拼寫運算框架把拼寫運算劃分成了 5 個階段：

1. `user_force_top`
2. `user_force_bottom`
3. `generate_code`
4. `user_sentence_bottom`
5. `user_force_bottom`

該框架主要是爲了減少重複代碼。例如，要在手機上實現 19 鍵佈局，則鍵位映射應該注入到所有方案中，而飛鍵映射只能用在類整句方案中。

五個階段依次從上到下運行。不同方案使用其中不同的設置：

| 方案 | user\_force\_top | user\_force\_bottom | generate\_code | user\_sentence\_bottom | user\_force\_bottom |
| -- | ---------------- | ------------------- | -------------- | ---------------------- | ------------------- |
| 魔然 | ✅                | ✅                   | ✅              | ✅                      | ✅                   |
| 整句 | ✅                | ✅                   | ✅              | ✅                      | ✅                   |
| 字詞 | ✅                | ❌                   | ❌              | ❌                      | ✅                   |
| 輔篩 | ✅                | ✅                   | ❌              | ✅                      | ✅                   |

* 只有 `user_force_top` 和 `user_force_bottom` 會注入到所有方案中。
* 輔篩模式使用特殊的編碼生成邏輯。
