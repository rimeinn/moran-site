import{_ as d,c as e,a4 as a,o}from"./chunks/framework.NOSrbWr_.js";const b=JSON.parse('{"title":"方案生成工具","description":"","frontmatter":{"order":10,"title":"方案生成工具"},"headers":[],"relativePath":"book/tools/schemagen/index.md","filePath":"book/tools/schemagen/index.md"}'),i={name:"book/tools/schemagen/index.md"};function c(r,t,s,n,p,l){return o(),e("div",null,t[0]||(t[0]=[a(`<h1 id="方案生成工具" tabindex="-1">方案生成工具 <a class="header-anchor" href="#方案生成工具" aria-label="Permalink to &quot;方案生成工具&quot;">​</a></h1><p>本項目提供一個強大的方案生成工具 tools/schemagen.py，可滿足方案生成和維護的諸多需求。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>該工具不隨方案打包分發，請從 <a href="https://github.com/rimeinn/rime-moran/blob/main/tools/schemagen.py" target="_blank" rel="noreferrer">GitHub repo</a> 上獲取。</p></div><h2 id="通用參數" tabindex="-1">通用參數 <a class="header-anchor" href="#通用參數" aria-label="Permalink to &quot;通用參數&quot;">​</a></h2><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--double-pinyin</code></td><td>zrm 或 flypy，默認 zrm</td><td>雙拼方案</td></tr><tr><td><code>--auxiliary-code</code></td><td>zrm 或 user，默認 zrm</td><td>輔助碼方案</td></tr><tr><td><code>--auxiliary-code-fallback</code></td><td>字符串，默認 <code>??</code></td><td>當輔助碼表中不存在該字時，使用這個參數作爲輔助碼</td></tr><tr><td><code>--pinyin-table</code></td><td>文件路徑，默認 <code>data/pinyin.txt</code></td><td>字詞的拼音和詞頻</td></tr></tbody></table><details><summary>拼音表文件格式</summary><p>使用 tab 分隔的三列數據，依次是字詞、讀音和詞頻。詞語的讀音可留空，這些讀音會被自動生成。例：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>〇	ling	981</span></span>
<span class="line"><span>音樂會	yin yue hui	1361</span></span>
<span class="line"><span>新聞辦		718</span></span></code></pre></div></details><details><summary>預置拼音表</summary><ul><li><code>data/pinyin.txt</code> 繁體數據，來自 Rime 八股文和朙月拼音</li><li><code>data/pinyin_simp.txt</code> 簡體數據，來自 Rime 八股文和 pinyin_simp</li></ul></details><div class="info custom-block"><p class="custom-block-title">INFO</p><p>在處理簡化字方案時，通常需要設定 pinyin-table 參數。</p></div><h2 id="命令-gen-chars" tabindex="-1">命令 gen-chars <a class="header-anchor" href="#命令-gen-chars" aria-label="Permalink to &quot;命令 gen-chars&quot;">​</a></h2><p>用於生成 <code>moran.chars.dict.yaml</code> 格式的文件。</p><p>直接使用拼音表數據。</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> schemagen.py</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gen-chars</span></span></code></pre></div><h2 id="命令-gen-dict" tabindex="-1">命令 gen-dict <a class="header-anchor" href="#命令-gen-dict" aria-label="Permalink to &quot;命令 gen-dict&quot;">​</a></h2><p>用於生成整句詞庫，格式類似 <code>moran.base.dict.yaml</code>。</p><p>在產生讀音時：首先使用詞庫中的讀音，若無，則會自動註音。自動註音過程可以調用 opencc 先進行簡繁轉換（因爲所用註音庫要求輸入是簡化字）。</p><p>在產生詞頻時：首先使用詞庫中的詞頻，若無，則會取 0。</p><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--input-dict</code></td><td><strong>必須</strong> 文件路徑</td><td>pinyin-table 格式的詞庫</td></tr><tr><td><code>--opencc-for-pinyin</code></td><td>文件名，默認 <code>t2s.json</code></td><td>在註音前簡繁轉換，默認繁轉簡</td></tr><tr><td><code>--opencc-for-output</code></td><td>文件名，默認爲空</td><td>在輸出詞語前簡繁轉換，默認不轉換</td></tr><tr><td><code>--compact</code></td><td></td><td>不保留容錯碼，只使用主碼產生詞典</td></tr><tr><td><code>--no-freq</code></td><td></td><td>不輸出詞頻</td></tr><tr><td><code>--freq-scale</code></td><td>浮點數，默認 1.0</td><td>在輸出詞頻時，可以乘上一個因子放大或縮小詞頻</td></tr></tbody></table><details><summary>輸入詞庫格式</summary><p>完整格式應是 pinyin-table 格式，即三個數據分別是詞、讀音、詞頻。</p><p>詞庫讀入時對兩列數據的情況做了兼容，同時支持詞、讀音和詞、詞頻兩種格式。即支持如下格式：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>你好	ni hao</span></span>
<span class="line"><span>再見	123</span></span></code></pre></div></details><h2 id="命令-gen-fixed" tabindex="-1">命令 gen-fixed <a class="header-anchor" href="#命令-gen-fixed" aria-label="Permalink to &quot;命令 gen-fixed&quot;">​</a></h2><p>該命令用於生成簡碼碼表。</p><p>簡碼碼表生成的邏輯：</p><ul><li>首先依次產生所有字的全碼，然後逐級嘗試把字放入一級、二級、三級簡碼位。每個簡碼位最多容納（tolerance 參數設定的數字）個簡碼。</li><li>詞語和全碼詞放在，並依據詞頻統一排序。</li></ul><p>若不指定 <code>--short-word</code> 則不生成簡詞。簡詞生成的邏輯：</p><ul><li>給每個詞語產生幾種特定的短碼： <ul><li>二字詞，使用兩個字的首碼產生二簡碼</li><li>三字詞，使用三個字的首碼產生三簡碼</li></ul></li><li>然後將該簡詞碼像簡字碼一樣，逐級嘗試放入簡碼位</li></ul><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--charset</code></td><td><strong>建議設置</strong> 文件路徑，默認 <code>data/trad_chars.txt</code></td><td>設定碼表中的單字</td></tr><tr><td><code>--input-dict</code></td><td><strong>建議設置</strong> 文件路徑</td><td>與 gen-dict 命令使用相同的詞庫格式；設定碼表中的詞語</td></tr><tr><td><code>--format</code></td><td><strong>建議設置</strong> code-words 或 code-word 或 word-code 或 word-codes</td><td>輸出碼表格式</td></tr><tr><td><code>--opencc-for-pinyin</code></td><td>文件名，默認 <code>t2s.json</code></td><td>（與 gen-dict 命令相同）註音時使用的簡繁轉換設定</td></tr><tr><td><code>--tolerance</code></td><td>逗號分隔的3個數字，默認 1,1,1</td><td>每級簡碼可以容納幾個簡碼</td></tr><tr><td><code>--short-word</code></td><td></td><td>是否生成簡詞</td></tr></tbody></table><h2 id="命令-update-compact-dict" tabindex="-1">命令 update-compact-dict <a class="header-anchor" href="#命令-update-compact-dict" aria-label="Permalink to &quot;命令 update-compact-dict&quot;">​</a></h2><p>根據最新的 zrmdb 定義，更新 compact 詞庫中的輔助碼部分。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>這個命令可用於將繁體詞庫自動轉換成簡體詞庫後，再更新輔助碼。</p><p>具體用法可參照 <code>tools/update_compact_dicts.sh。</code></p></div><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--rime-dict</code></td><td><strong>必須</strong> 文件名</td><td>Rime 詞庫</td></tr></tbody></table><h2 id="命令-update-char-weight" tabindex="-1">命令 update_char_weight <a class="header-anchor" href="#命令-update-char-weight" aria-label="Permalink to &quot;命令 update\\_char\\_weight&quot;">​</a></h2><p>根據最新 pinyin-table，更新 chars 碼表的詞頻。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>這個命令可用於將繁體字表自動轉換成簡體字表後，再更新輔助碼。</p><p>具體用法可參照 <code>make_simp_dist.sh</code>。</p></div><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--rime-dict</code></td><td><strong>必須</strong> 文件名</td><td>Rime 詞庫</td></tr></tbody></table><h2 id="命令-update-sp" tabindex="-1">命令 update_sp <a class="header-anchor" href="#命令-update-sp" aria-label="Permalink to &quot;命令 update\\_sp&quot;">​</a></h2><p>根據最新 pinyin-table，重新修改詞的雙拼部分。</p><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--rime-dict</code></td><td><strong>必須</strong> 文件名</td><td>Rime 詞庫</td></tr><tr><td><code>--find</code></td><td><strong>必須</strong> 字符串</td><td>只更新含有這些字的詞</td></tr></tbody></table><p>例如，更新只含「朝」字的詞語的讀音：<code>update-sp --find &quot;朝&quot;</code></p><h2 id="命令-convert-sp" tabindex="-1">命令 convert_sp <a class="header-anchor" href="#命令-convert-sp" aria-label="Permalink to &quot;命令 convert\\_sp&quot;">​</a></h2><p>轉換詞庫的雙拼方案爲其他方案。可以將本方案的自然碼雙拼轉換成其他雙拼。</p><p>輸入雙拼方案由<a href="./#通用參數">通用參數</a>中的 <code>--double-pinyin</code> 指定，輸出方案由 <code>--to</code> 指定。</p><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--rime-dict</code></td><td><strong>必須</strong> 文件名</td><td>Rime 詞庫</td></tr><tr><td><code>--to</code></td><td><strong>必須</strong> 支持的雙拼</td><td>目標雙拼方案</td></tr></tbody></table><h2 id="命令-convert-fixed-sp" tabindex="-1">命令 convert_fixed_sp <a class="header-anchor" href="#命令-convert-fixed-sp" aria-label="Permalink to &quot;命令 convert\\_fixed\\_sp&quot;">​</a></h2><p>轉換固定碼表的雙拼方案爲其他方案。可以將本方案的自然碼雙拼轉換成其他雙拼。</p><p>輸入雙拼方案由<a href="./#通用參數">通用參數</a>中的 <code>--double-pinyin</code> 指定，輸出方案由 <code>--to</code> 指定。</p><table tabindex="0"><thead><tr><th>參數</th><th>取值</th><th>說明</th></tr></thead><tbody><tr><td><code>--rime-dict</code></td><td><strong>必須</strong> 文件名</td><td>Rime 詞庫</td></tr><tr><td><code>--to</code></td><td><strong>必須</strong> 支持的雙拼</td><td>目標雙拼方案</td></tr></tbody></table>`,45)]))}const u=d(i,[["render",c]]);export{b as __pageData,u as default};
