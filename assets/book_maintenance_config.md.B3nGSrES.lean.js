import{_ as a,c as i,a4 as e,o as t}from"./chunks/framework.NOSrbWr_.js";const c=JSON.parse('{"title":"配置","description":"","frontmatter":{"order":3,"title":"配置"},"headers":[],"relativePath":"book/maintenance/config.md","filePath":"book/maintenance/config.md"}'),n={name:"book/maintenance/config.md"};function l(h,s,p,d,r,k){return t(),i("div",null,s[0]||(s[0]=[e(`<h1 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h1><h2 id="常見配置參考" tabindex="-1">常見配置參考 <a class="header-anchor" href="#常見配置參考" aria-label="Permalink to &quot;常見配置參考&quot;">​</a></h2><h3 id="模糊音設置" tabindex="-1">模糊音設置 <a class="header-anchor" href="#模糊音設置" aria-label="Permalink to &quot;模糊音設置&quot;">​</a></h3><p>編輯 <code>moran.yaml</code> 中的 <code>algebra/user_sentence_top</code> 部分：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">algebra</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  user_sentence_top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    __append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      __patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ... 其他內容略</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/bufen/z_zh</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 不分 z 和 zh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/bufen/c_ch</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 不分 c 和 ch</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/bufen/s_sh</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 不分 s 和 sh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/bufen/n_l</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 不分 n 和 l</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/bufen/h_f</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # 不分 h 和 f</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/bufen/in_ing</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 不分 in 和 ing</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/bufen/en_eng</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 不分 en 和 eng</span></span></code></pre></div><p>無需全部保留，只需要保留自己想要的模糊音對應的行。</p><h3 id="恢復老自然碼的-u-打法-jv-qv-xv-yv" tabindex="-1">恢復老自然碼的 ü 打法（jv qv xv yv） <a class="header-anchor" href="#恢復老自然碼的-u-打法-jv-qv-xv-yv" aria-label="Permalink to &quot;恢復老自然碼的 ü 打法（jv qv xv yv）&quot;">​</a></h3><p>編輯 <code>moran.yaml</code> 中的 <code>algebra/user_sentence_top</code> 部分：</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">algebra</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  user_sentence_top</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    __append</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      __patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">moran_defs:/classic_zrm_jqx</span></span></code></pre></div><h3 id="掛接用法" tabindex="-1">掛接用法 <a class="header-anchor" href="#掛接用法" aria-label="Permalink to &quot;掛接用法&quot;">​</a></h3><p>掛接用法指碼表輸出總是優先於整句輸出。</p><h4 id="默認模式設置" tabindex="-1">默認模式設置 <a class="header-anchor" href="#默認模式設置" aria-label="Permalink to &quot;默認模式設置&quot;">​</a></h4><p>編輯 <code>moran.custom.yaml</code></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">patch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  switches/@5/reset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  moran/show_chars_anyway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  moran/show_words_anyway</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><h4 id="輔篩模式設置" tabindex="-1">輔篩模式設置 <a class="header-anchor" href="#輔篩模式設置" aria-label="Permalink to &quot;輔篩模式設置&quot;">​</a></h4><p>轉到<a href="./../schemas/fushai/features.html#掛接固定碼表">對應章節</a>。</p><h2 id="技術細節" tabindex="-1">技術細節 <a class="header-anchor" href="#技術細節" aria-label="Permalink to &quot;技術細節&quot;">​</a></h2><p>與一般的 Rime 配置不同，本項目爲了減少代碼重複，各方案中共通的部分被提取到一個額外的文件 moran.yaml 中。</p><p>該文件定義了如下幾個部分：</p><ul><li><code>algebra</code>：各魔然方案共享的<a href="https://github.com/rime/home/wiki/SpellingAlgebra" target="_blank" rel="noreferrer">拼寫運算</a>（spelling algebra）設定。</li><li><code>key_bindings</code>：各方案共享的快捷鍵設定。</li><li><code>octagram</code>：八股文語言模型插件相關配置。</li></ul><h3 id="拼寫運算" tabindex="-1">拼寫運算 <a class="header-anchor" href="#拼寫運算" aria-label="Permalink to &quot;拼寫運算&quot;">​</a></h3><p>魔然的拼寫運算框架把拼寫運算劃分成了 5 個階段：</p><ol><li><code>user_force_top</code></li><li><code>user_force_bottom</code></li><li><code>generate_code</code></li><li><code>user_sentence_bottom</code></li><li><code>user_force_bottom</code></li></ol><p>該框架主要是爲了減少重複代碼。例如，要在手機上實現 19 鍵佈局，則鍵位映射應該注入到所有方案中，而飛鍵映射只能用在類整句方案中。</p><p>五個階段依次從上到下運行。不同方案使用其中不同的設置：</p><table tabindex="0"><thead><tr><th>方案</th><th>user_force_top</th><th>user_force_bottom</th><th>generate_code</th><th>user_sentence_bottom</th><th>user_force_bottom</th></tr></thead><tbody><tr><td>魔然</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>整句</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td><td>✅</td></tr><tr><td>字詞</td><td>✅</td><td>❌</td><td>❌</td><td>❌</td><td>✅</td></tr><tr><td>輔篩</td><td>✅</td><td>✅</td><td>❌</td><td>✅</td><td>✅</td></tr></tbody></table><ul><li>只有 <code>user_force_top</code> 和 <code>user_force_bottom</code> 會注入到所有方案中。</li><li>輔篩模式使用特殊的編碼生成邏輯。</li></ul>`,27)]))}const E=a(n,[["render",l]]);export{c as __pageData,E as default};
